function isNumberKey(e,t){var l=t.which?t.which:t.keyCode;return 46==l?-1===e.value.indexOf(".")?!0:!1:l>31&&(48>l||l>57)?!1:!0}function handleClick(e){0==e.value?($("#coil1table").show(),$("#coil2table").hide(),$("#coil3table").hide()):1==e.value?($("#coil1table").hide(),$("#coil2table").show(),$("#coil3table").hide()):2==e.value&&($("#coil1table").hide(),$("#coil2table").hide(),$("#coil3table").show()),$.ajax({url:"/experiments/send_to_rasp",type:"POST",data:{coil:e.value,prm:document.getElementById("PRM_value").value},success:function(e){}})}function addrow(){""!=$("#Voltage").val()&&($("input[type='radio'].radioBtnClass").is(":checked")&&(coil=$("input[type='radio'].radioBtnClass:checked").val()),0==coil?$("#coil1table tbody").append('<tr class="child"><td>'+table1.rows.length+"</td> <td>"+document.getElementById("PRM_value").value+"</td><td>"+document.getElementById("Voltage").value+"</td></tr>"):1==coil?$("#coil2table tbody").append('<tr class="child"><td>'+table2.rows.length+"</td> <td>"+document.getElementById("PRM_value").value+"</td><td>"+document.getElementById("Voltage").value+"</td></tr>"):2==coil&&$("#coil3table tbody").append('<tr class="child"><td>'+table3.rows.length+"</td> <td>"+document.getElementById("PRM_value").value+"</td><td>"+document.getElementById("Voltage").value+"</td></tr>"),drow())}function drow(){for(var e=[],t=[],l=[],a=1;a<=table1.rows.length-1;a++)for(var o=0;2>=o;o++)1==o&&e.push([parseFloat(table1.rows[a].cells[o].innerHTML),parseFloat(table1.rows[a].cells[o+1].innerHTML)]);for(var a=1;a<=table2.rows.length-1;a++)for(var o=0;2>=o;o++)1==o&&t.push([parseFloat(table2.rows[a].cells[o].innerHTML),parseFloat(table2.rows[a].cells[o+1].innerHTML)]);for(var a=1;a<=table3.rows.length-1;a++)for(var o=0;2>=o;o++)1==o&&l.push([parseFloat(table3.rows[a].cells[o].innerHTML),parseFloat(table3.rows[a].cells[o+1].innerHTML)]);e.sort(sortFunction),t.sort(sortFunction),options4.series[0].data=e,options4.series[1].data=t,options4.series[2].data=l;new Highcharts.Chart(options4)}function sortFunction(e,t){return e[0]===t[0]?0:e[0]<t[0]?-1:1}var options4={chart:{renderTo:"chart4",type:"spline"},credits:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}}},subtitle:{text:"PRM"},xAxis:{gridLineWidth:.5,ordinal:!1,title:{text:"RPM"}},yAxis:{gridLineWidth:.5,ordinal:!1,title:{text:"Induced Voltage (volt)"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{pointWidth:1,name:"Coil(1)",data:[]},{pointWidth:1,name:"Coil(2)",data:[]},{pointWidth:1,name:"Coil(3)",data:[]}]},table1,table2,table3;$(document).ready(function(){function e(){document.getElementById("PRM_value").value=l.value,$("input[type='radio'].radioBtnClass").is(":checked")&&(t=$("input[type='radio'].radioBtnClass:checked").val()),$.ajax({url:"/experiments/send_to_rasp",type:"POST",data:{coil:t,prm:document.getElementById("PRM_value").value},success:function(e){}})}table1=document.getElementById("coil1table"),table2=document.getElementById("coil2table"),table3=document.getElementById("coil3table");var t,l=document.querySelector(".js-PRM");new Powerange(l,{callback:e,start:0,min:0,max:400});drow(),$("#Measure").click(function(){var e;$("input[type='radio'].radioBtnClass").is(":checked")&&(e=$("input[type='radio'].radioBtnClass:checked").val()),$.ajax({url:"/experiments/send_to_rasp",type:"POST",data:{coil:e,prm:document.getElementById("PRM_value").value},success:function(e){}})}),$("#coil2table").hide(),$("#coil3table").hide();var a=document.createElement("iframe");a.frameBorder=0,a.width="480px",a.height="400px",a.id="myFrame",a.scrolling="no",a.setAttribute("src","http://user:@41.38.70.12:4440/video/mjpg.cgi"),document.getElementById("parentDivId").appendChild(a)});